
<link rel="import" href="../fc-call-center/fc-course-calendar-creation-behavior.html">
<link rel="import"  href="../fc-call-center/fc-form-routing-behavior.html">
<link rel="import" href="../fc-call-center/fc-calendar-list-widget-behavior.html">
<link rel="import" href="../fc-call-center/fc-calendar-behavior-beta-prime.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<dom-module id="fc-dropdown-libre">
<template id="fc-dropdown-libre-template">
<style>
    paper-item{
        padding: 12px 4px 12px 20px; 
        margin: 6px 4px 6px 18px; 
        font-size: 12px; 
        font-weight: 300; 
        font-family: merriweather; 
        color: #009;
        margin-top: 3px; min-width: 180px; 
        text-align: left;


            --paper-item-selected:{
                background-color: #FFFFFF;
                border: 1px silver solid;
                @apply(--paper-item-selected);
            };

            --paper-item-focused:{
              background-color: #FFFFFF; 
              font-weight: 600;
              outline: 0px white solid;
                border: #005c00 1px solid; 
                @apply(--paper-item-focused);      
            };
            --paper-item:{padding: 0px;
                max-width: 480px;

                @apply(--paper-item);
            };

    }
    paper-item-body{--paper-item-body-focused:{border-bottom: 1px silver}
      textarea::focused{outline: 0px white solid;}
      textarea{border: 11px solid green;}
    section{
            padding: 0px 24px; 
        text-align: left;
        font-size: 14px;

    }
    .check{
        position: absolute;
        left: 12px;
        color: green;
        font-size: 1.3em;
        cursor: pointer;

    }
    .checkMinus{
        position: absolute;
        left: 12px;
        color: red;
        font-size: 2.1em;
        cursor: pointer;
        left:20px;
    }
    .label{
        color: #005c00;
        font-size: 1.4em;
       text-decoration-style:underline;
    }

</style>
       <!-- <template is="dom-repeat"  items="{{displayedFormArray}}" as="arr" id="pageRepeater" filter="{{createFilter(taValue, searchOff)}}"> -->
 
 <textarea contenteditable style="resize: none; width: 100%; outline: 0px solid;" hidden$="{{textareaHidden}}" value="{{item.value::input}}" class="layout vertical arround-justified"></textarea>
    <paper-listbox id="myFreeDropdown">
        <template is="dom-repeat"  items="{{selectedFormArray}}" id="optionsRepeater" filter="{{createFilter(issValue, searchOff)}}">
            <paper-item onclick="{{item.myFunction}}" btn-set-value="{{item.dataSetValue}}" btn-text="{{item.text.0}}"  btn-args="{{item.dataArgs}}"" style$="{{_computeStyle(item.dataProperty, item.dataSetValue, color, background, item.text.0)}}" 
                btn-property="{{item.dataProperty}}" class="horizontal block" on-tap="makeSelection" name="{{_computeItemSelectedPropertyName(item, index,itemSelectedProperty)}}"  value-object="{{item}}" value="{{_computeItemSelectedPropValue(item,index,itemSelectProperty)}}" 
                on-up="toggleSelection">  
                                     <section class="label"> {{item.label}} </section>
                                    <span id="checkcheck" class$="checkMinus {{computeCheckedClass(selectCheck, item.ind)}}">{{_computeChecked(item.ind, selectCheck)}}</span>
                                    <section style="display: block">[[item.text]]</section>
                                    <span>{{_computeItemSelectedPropValue(item,index, itemSelectProperty)}}</span>
             </paper-item>
        </template>
    </paper-listbox>      
    </template>     
 <script>
 FcDropDownLibre=Polymer({
    is:"fc-dropdown-libre",
    behaviors:[
            FCBehaviors.FcCalendarOptionsSelectorBehavior, 
            FCBehaviors.FcFormDataRoutingBehavior,
            //FCBehaviors.FcCalendarListWidgetBehavior],
    ],
    listeners:{'openDropdown': 'setGetAndScroll'},
    properties:{
        arrayDropdown:{
            type: Array, 
            value: function(){ 
                var njhs=localStorage.getItem("NJHS");
                this.set("quant", njhs);
                return njhs;
            },
            notify: true,
        },

        textareaHidden:{
            type: Boolean, 
            value: true, 
            notify: true,
        },
        selectCheck:{
            type: Number,
            value: function(){return -1;},
            notify: true,
        },
        checkEvent:{
            type: Object,
            value:function(){return{};},
            notify: true,
        },
        checked: {
            type: Boolean, 
            value: function (){return false;}, 
            notify: true,
        },
        isNotToggle:{
            type:Boolean, 
            value:function(){return false;},
            notify: true,
        }


    },
    ready(){console.log(this.forms, this.formSelected, "hello?"); },
    toggleSelection(e){},
    _computeDropDownItems(focused, clicked, quant, dropdownItems){},
    _computeItemSelectedPropValue(item,index, itemSelectProperty){ return "oooonooo";},
    _computeItemSelectedPropertyName(item, index,itemSelectedProperty){


    },
    createFilter(issValue, searchOff){},
    _computeStyle(itemDataProperty, itemDataSetValue, color, background, itemText){},
    makeSelection(e){ 
        var children =Polymer.dom(this.$.optionsRepeater).children; 
        console.log(e, children, e.target);
       this.set("selectCheck", e.model.item.ind);
       this.set("checkEvent", e.model.item);
       this.set("selected")


    },

    _computeChecked(ind, selectCheck){
        if(ind===selectCheck){return '\✅';}else{return '\☐';}
    },
    computeCheckedClass(selectCheck, ind, isNotToggle){
        if(isNotToggle===false){
        this.set("checked",!this.checked);
         this.toggleClass("checked",this.checked, this.$.checkcheck);
           }
        },
   
    attached(){
        this.set("selectedFormArray", [this.forms.callIntakes, this.forms.callIntakesTwo]);
        this._computeInputArrays(this.inputs);
     
    },
    _handleTaps: function(e){
        console.log(e,
        e.target );
        var target=e.target;
                while(target.nodeName!=="PAPER-BUTTON" && target.nodeName!=="PAPER-ICON-BUTTON" && target.nodeName!=="FC-CALL-CENTER-DIALOG")
                    {target=target.parentElement;}
                    if(target.nodeName=="PAPER-BUTTON" || target.nodeName=="PAPER-ICON-BUTTON"){
                        this[target.btm]();
                    }
                        else{
                            var j=e;
                            this.soSelected(j);
                        }
            },
 
    confirmCalculate(){
        console.log(this.fcCourse);
        this.fcCourse.save();
        this.fire("catchTheCourse", {theCourse: this.fcCourse});
        event = JSON.stringify(this.fcCourse);
        console.log(event);
        localStorage.setItem("New_Course", event); 
    },





 });
 </script>
 </dom-module>     
<!-- 

    <div 
                                        class="primary">
                                        {{course.coach}} {{course.fcid}}
                                    </div>
                                    <div 
                                        class="secondary">
                                        [[course.courseMeetingSets]], {{course.numberOfMeetings}} Classes<br>
                                        Test:{{course.testDate}}, {{course.programLength}}, {{course.price}}
                                    </div>
                                </paper-item-body>      
                                <paper-icon-button 
                                        icon="star" 
                                        style="color: {{course.coachObject.color}}"
                                        alt="favourite this!">
                                </paper-icon-button>
                            </paper-item>
                        </template> -->