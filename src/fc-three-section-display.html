




<link rel="import" href="../fc-app-elements/fc-animated-header/fc-animated-header.html">
<!-- <link rel="import" href="../fc-grid/fc-grid-rows"> -->
<dom-module id="fc-three-section-display">
<template>
<style>
:host{
	position: absolute;
/*	margin-top:-150px;
	margin-bottom: -150px;*/
	background: white;
	box-shadow: 4px 11px 21px 7px #9fafaf;
	max-width: 110%;
	right: 0px;
	top:-1px;
	bottom: -1px;
	left: 0px;
	/*padding: 150px 0px;*/
	overflow: hidden;
	@apply(--layout-vertical);
	@appply(--layout-flex);
}

.container{
	position: static;
	max-height: 99vh;
	min-height: 60vh;
	height: 90vh;
	overflow-y: scroll;
	margin-top: 8px;
	background: aliceblue;
	border: solid 1px red;
	@apply(--layout-flex);
	@apply(--layout-vertical);
}
.colummnOne{
	height: 110vh; 
	margin-right: 12px; 
	position: static;
	bottom: -22px;
	@apply(--layout-vertical);
		@apply(--layout-flex);
}
.columnTwo{
	height: 110vh; 
	margin-right: 12px; 
	position: static
	bottom:-22px;
	@apply(--layout-vertical);
	@apply(--layout-flex);

}
.rightSideOfPanelResizer{
	 position:static;
	 display: block;
	 right: -1px;
	 max-width:6px!important;
	  top: 0px;
	 bottom:0px;
	 margin-left: 2px;
	 min-width: 5px!important;
	 cursor:ew-resize;
	 padding: 2px 4px;
 	height: 120vh;
	 opacity: 1;
	 background: silver;
	 z-index:100;
		@apply(--layout-vertical);
	@apply(--layout-flex); 
	}
  
  *{ font-family: merriweather;
  	font-weight: 300;
  	font-size: 1em;
  	color: #009;
  }
  .fullPanel{
  position:static;
  border: 1px silver solid;
  height: 92vh;  
  overflow: hidden;
  @apply(--layout-vertical);
	@apply(--layout-flex); 
}

.rightPanel{
	position:static; 
	border: 2px silver solid; 
 	height: 92vh; 
 	  overflow: hidden; 
	@apply(--layout-vertical);
	@apply(--layout-flex); 

}
</style>

<div id="containerLeftDrawer" class="horizontal layout flex" style="position:absolute; top:0px; bottom:0px; left:0px; right:0px;">
	<div id="columnOne" class="columnOne">
			<div id="myPanel" class="fullPanel vertical layout block" style$="height:{{currentHeight}}px;""> 
				<fc-animated-header container-height="{{currentHeight}}" container-width="{{currentWidth}}">
				I am the Header
				</fc-animated-header>		
				<div class="column container">
					   <content select=".leftPanel"></content>
				</div>    
		 	</div>
	</div>
	<section on-track="_resize" hidden="{{!isResizing}}" class="rightSideOfPanelResizer"></section>
 	<div id="columnTwo" class="columnTwo">	
		<div class="rightPanel vertical layout block" style$="height:{{currentHeight}}px;">
			<fc-animated-header container-height="{{currentHeight}}" container-width="{{computeContainerWidth(maxCurrentWidth, currentWidth)}}">I am Header2</fc-animated-header>
			<div class="column container">
   				<content select=".centerPanel"></content>
			</div> 
		</div>
 	</div>
</div>

 
</template>
<script>
FcThreeSectionDisplay=Polymer({
	is: "fc-three-section-display",
	behaviors:[
	Polymer.IronResizableBehavior,
	FCBehaviors.FocusedDataManagerBehavior],
	properties: {
		currentLeft:{
			type: Number,
			value: function(){}
		},
		currentWidth: {
			type: Number,
			value: function(){return 400;},
			notify: true,

		},
		maxCurrentWidth:{
			type: Number, 
			notify: true, 
		},
		_notifyingDescendant: {
        	type: Boolean,
        	value: true
      	},
		
		currentHeight: {
			type: Number,
			value:function(){return 500;},
			notify: true
		},
		maxHeight:{
			type: Number,
		value: function(){return 1400;},
			notify: true,


		},
		maxHeight:{
			type: Number,
		value: function(){return 65;},
			notify: true,


		},
	

		isResizing:{
			type: Boolean,
			notify: true,
			value:function(){return true;},
		}

  },
  attached(){
  	this.$.columnOne.style.width=this.currentWidth+"px";

  },


 	 _resize: function(e){
          e.preventDefault();
           var resizer=e.target;
           var next=Polymer.dom(resizer).nextElementSibling;
              next.style.width="auto";
           var elem=Polymer.dom(resizer).previousElementSibling;
           var width=this.currentWidth;        
          switch(e.detail.state) {
                case 'start':  
                break;
                case 'track':
                next.style.width="auto";
                  var nwidth = parseInt(elem.style.width) + e.detail.ddx;
      			  var max=this.maxCurrentWidth-80;
                  var nwidth2=(nwidth<50)?50:(nwidth>=max)? max:nwidth;
                  var trueWidth = nwidth2.toString()+'px';  
                  this.set("currentWidth",nwidth2);
                  elem.style.width= trueWidth;
                  next.marginLeft=(nwidth2-width).toString(); + "px";
                break;
                case 'end':
                 	elem.style.width= trueWidth;
                 	this.set("currentWidth", nwidth2);
                  	Polymer.dom.flush();
                break;
              }
        },
    _upDown(e){
           	var resizer=e.target;
            var next=Polymer.dom(resizer).nextElementSibling;
            var elem=Polymer.dom(resizer).previousElementSibling;
        while(elem.nodeName!="DIV" || elem.nodeName==null){elem=elem.previousElementSibling;}
        switch(e.detail.state){
            case 'start':
	            var sheight =window.getComputedStyle(elem, null).getPropertyValue("height");
	            var nheight=parseInt(sheight);
	            this.set("currentHeight", nheight);
            break;
            case 'track':
	            var newheight = parseInt(this.currentHeight) + e.detail.ddy;
	            var nheight2=(newheight<parseFloat(this.minHeight))?this.minHeight:(newheight>=this.maxHeight)?this.maxHeight: newheight; 
	            var trueHeight = nheight2.toString()+'px';
	            this.set("currentHeight",nheight2);
	            elem.style.height=trueHeight;
            break;
            case 'end':
			  	this.set("currentHeight",nheight2);
             	elem.style.height= trueHeight;
              	Polymer.dom.flush();
            break;
            }
        },
      computeContainerWidth(max, current){
      	var width=Math.floor(max-current-80);
      	return width;
      }
      
});
</script>
</dom-module>
<!--

		displayedDateObject:{
				type:Object,
			value:function(){
				return {"year": new Date().getFullYear(),
				"month": new Date().getMonth(),
				"day":new Date().getDate()};
			},
			notify:true,
		},
		change:{
			notify: true,
			value:function(){return null;},
		},
		user:{
			type:Object,
			notify: true, 

		},
		params:{
			type: Object,
			notify: true,
		},

_forward: function(){
		if(this.indexItemsArraysOne===this.itemsArraysOne.length-1)
			{
				this.indexItemsArraysOne=0;
			}
		else{
			this.set("indexItemsArraysOne", this.indexItemsArraysOne+1);
    		this.set("displayedLeft", this.itemsArraysOne[this.indexItemsArraysOne]);
    		
    	}
    },
 _backOne: function(){	
 		if(this.indexItemsArraysOne===0)
 		{ 
			var max=this.itemsArraysOne.length-1;
 			console.log(max);
 			this.set("indexItemsArraysOne",max);
 			this.set("displayedLeft",this.itemsArraysOne[this.indexItemsArraysOne]);
 		}
 		else
 		{	this.set("displayedLeft", this.itemsArraysOne[this.indexItemsArraysOne-1]);
 			this.set("indexItemsArraysOne", this.indexItemsArraysOne-1);
    		
 		}

},  
  computeItemHeaderHidden(header){
    if(header){return false;}
    else{return true;}
  },
  _computeItemsOneObject(itemsArraysOne,indexItemsArraysOne){},
  
computeEventHeightLightColor:function(){
	return "aliceblue";
},
_computeItemsOneObject(itemsArraysOne,indexItemsArraysOne){

	if(itemsArraysOne && itemsArraysOne.length>0){
		console.log(itemsArraysOne,indexItemsArraysOne);

	return itemsArraysOne[indexItemsArraysOne];
	}
},

computeDay: function(day){if(day){return "pretty";}
},
ready: function()
{	
		var today = new Date();
		var index=today.getMonth();
 		this.set("indexItemsArraysOne",0);

},

computeCurrentHeight: function(currentHeight){
   	var ht=window.screen.height;
      ht=.90*(ht);
      ht=ht.toString()+"px";
    	if(this.currentHeight==undefined) {this.set("currentHeight", ht); this.style.height=ht;}	
    },
computeViewHeaderOne(monthsArray){





    },
setArrays:function(){
	var monthsArray=["January","February","March","April","May","June","July","August","September","October","November","December"],
	setVal=monthsArray.map(function(mon, i, arr){
		var month = mon.slice(0,3);
		return [mon, month, i];});
	},
setCalendarDays(newMonth){
	if(newMonth){}
		var self=this;
		this.calendarDayArray=[];
 for(var i=0;i<2; i++){ 	
	// var array = this.monthsArray[i];
	// this.monthsArray.length;
	// this.push("calendarMonthsArray",array);
	// array.forEach(function(item, index, arr){
	// 	self.push("calendarDayArray", item);});
	// 	};
	this.set("displayed", this.calendarMonthsArray[this.displayedIndex]);
	// 	var calendar =[];
	// 	var calendar = this.calendarDayArray;
	// 	this.set("fcCourse.courseCalendarDaysArray", calendar);
	// 	this.set("fcCourse.calendarDayArray", calendar);}
	this.setArrays();
	}
},
//set data object values

initialize(days,incrementUnits){
	var bumpBackMonth=11, bumpAheadMonth=0,year=new Date().getFullYear(),day=new Date().getDate(), bumpAheadMonth, month=new Date().getMonth(); 
	var lessOneYear=year-1;
	var plusOneYear=year+1;
	var plusOneMonth=month+1;
	var lessOneMonth=month-1;
	var lessOneDay=day-1;
	var plusOneDay=day+1;

	console.log(year, month);
	var dateObject =(month===0)?{"startDate":new Date().setFullYear(lessOneYear, 11, 1), "endDate":new Date().setFullYear(year, 1, 1)}:(month===11)?{"startDate":new Date().setFullYear(year, 10, 1),"endDate":new Date().setFullYear(plusOneYear,0,31)}:{"startDate":new Date().setFullYear(year,lessOneMonth,0), "endDate":new Date().setFullYear(plusOneYear,0,31)};
	if(days){
	this.calendarCreator(dateObject.startDate, dateObject.endDate, "months", days);
	}//add ret vals here dont have it set inside// needs to chain
	else{this.calendarCreator(dateObject.startDate, dateObject.endDate, "months");}
},

setDisplayedYearMonthDay(displayDateObject, dateUnit, updownflat){
		var previousDisplayDateObjectUnitValue=this.displayDateObject[dateUnit];
  		displayDateObject[dateUnit]=(updownflat===true)?displayDateObject[dateUnit]+1:(updownflat===false)?displayDateObject[dateUnit]-1:displayDateObject[dateUnit];
  		var keys=Object.keys(displayDateObject);
  		date=new Date(), date.setFullYear(displayDateObject.year, displayDateObject.month, displayDateObject.day);
  			this.set("year". date.getFullYear());
  			this.set("month",date.getMonth());
  			this.set("day", date.getDate());
  },
// get nextIncrementValue(){

// 	year=new Date().getFullYear(), bumpAheadMonth, month=new Date().getMonth();

// },

computeDisplayed(displayedIndex)
{		
	return this.calendarMonthsArray[displayedIndex];
},
forward: function(){
		if(this.displayedIndex ==this.maxIndex){
 			this.splice("calendarMonthsArray",this.MaxIndex,1);
 		}
 		else
 		{	this.set("backHidden",false);
 			this.set("forwardHidden",false);
 			console.log(this.calendarMonthsArray);
    		this.set("displayedIndex", this.displayedIndex+1);
    		this.set("displayed", this.calendarMonthsArray[this.displayedIndex]);
    		this.setArrays();
    	}
    },
backOne: function(){	
 		if(this.displayedIndex===0)
 		{ 
 			this.set("backHidden",true);
 		}
 		else
 		{	this.set("forwardHidden",false);
 			this.set("backHidden",false);
    		this.set("displayedIndex", this.displayedIndex-1);
    		console.log(this.calendarMonthsArray);
    		this.set("displayed", this.calendarMonthsArray[this.displayedIndex]);
 				this.setArrays();
 		}
 	
    },
  
  computeYear:function(displayed)
  		{
  		var	y =  new Date();
  		y=y.getFullYear();
  		var	m = new Date();
  		var retVal=y+Math.floor((this.displayedIndex)/12);
		return retVal;
		},

computeNotInMonths: function(item, displayedIndex){
	var x=new Date(item).getFullMonth();
	var y=this.displayedCalendarMonth;
	var retVal = (x===y);
	var len = this.displayed.length;
	return retVal;
},
computeViewMonth: function(displayedIndex){
 var monArr =[];	
 monArr=["January","February","March","April","May","June","July","August","September","October","November","December","January","February","March","April","May","June","July","August","September","October","November","December","January","February","March","April","May","June","July","August","September","October","November","December","January","February","March","April","May","June","July","August","September","October","November","December"];
	return monArr[displayedIndex];
	},

	_computePrettyDay: function(d)
 	{	
 		var day=new Date(d).getDate();//console.log(day);
 		return day;

 	},

<!--header ends-->
				<!--resizer-->
				<!-- <div flex layout vertical style="height: 96vh;">
				<div class="horizontal layout flex" style="height: 50vh; margin: 12px 5px;"> -->
			<!-- 	 <fc-grid-rows data-set="{{itemsArraysOne}}" current-inner-width="{{leftCurrentWidth}}" page-type="{{gridPage}}" route="{{interiorLeftPage}}" data-selected="{{leftDrawerSelectedViewsArray}}"  local-dashboard="{{localDashboard}}" class="" style$="left:0px; padding-left: 4px; right: 6px; width:calc({{leftCurrentWidth}}-80)px; padding-right: 0px; margin-right: 0px; padding-left: 2px;" properties="{{format}}" grid-event="{{gridEvent}}" btn-value={{btnValue}} color="{{color}}" color-two="{{format.colorTwo}};">
					</fc-grid-rows>   -->
